const{createApp:createApp}=Vue;let app_calc={data:()=>({data:{persons:[],products:[]}}),mounted(){fetch("http://e91965tr.bget.ru/calc-your-weekend/get_model.php").then(response=>response.json()).then(data=>this.data=data)},methods:{addNewPerosn(){this.data.persons.push({name:""})},addNewProduct(){this.data.products.push({name:"",count:0,price:0,units:""})},personCalcValues(personKey,productKey){if(void 0!==this.data.persons[personKey].disabledProduct&&void 0!==this.data.persons[personKey].disabledProduct[productKey])return"0";let personCount=this.getPerosnCountByProduct(productKey),product=this.data.products[productKey],count=product.count/personCount,price=product.count*product.price/personCount;return count.toFixed(2)+product.units+" / "+price.toFixed(2)+"â‚½"},toggleUse(personKey,productKey){void 0===this.data.persons[personKey].disabledProduct&&(this.data.persons[personKey].disabledProduct=[]),void 0!==this.data.persons[personKey].disabledProduct[productKey]?delete this.data.persons[personKey].disabledProduct[productKey]:this.data.persons[personKey].disabledProduct[productKey]=!0,console.log(this.data.persons[personKey].disabledProduct)},getPerosnCountByProduct(productKey){let personCount=this.data.persons.length;for(let i in this.data.persons)void 0!==this.data.persons[i].disabledProduct&&this.inArray(this.data.persons[i].disabledProduc,productKey)&&personCount--;return personCount},inArray(obj,k){for(let i in obj)if(i===k)return!0;return!1},deleteProduct(productKey){this.data.products.splice(productKey,1)},deletePerson(personKey){this.data.persons.splice(personKey,1)},save(){const requestOptions={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.data)};fetch("http://e91965tr.bget.ru/calc-your-weekend/save.php",requestOptions).then(resp=>{console.log(resp.data)})}}};const app=createApp(app_calc);app.mount("#app");